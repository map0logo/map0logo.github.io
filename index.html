<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="geomancia matemática, geomática poética">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>map0logo 地図学者 | map0logo 地図学者</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://map0logo.github.io/">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]>
            <script src="assets/js/html5shiv.min.js"></script>
            <script src="assets/js/respond.min.js"></script>
        <![endif]--><link rel="prefetch" href="posts/agentes-en-python/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-success header-panel shadow-z-3" role="navigation"><div class="container-fluid">
        <div class="row">
          <div class="col-xs-3">
            <h1 class="title-blog">
                <a href="http://map0logo.github.io/">
                        <img src="images/mapologo.png" alt="map0logo 地図学者" id="logo"><span id="blog-title">map0logo 地図学者</span>
                    </a>
            </h1>
          </div>
        </div>
      </div>
<!-- /.container-fluid -->
</nav><div class="container-fluid main" id="content" role="main">
        <div class="row">
            <nav class="col-xs-3 menu"><ul>
<li class="withripple"><a href="archive.html">Archivo</a></li>
                <li class="withripple"><a href="categories/">Etiquetas</a></li>
                <li class="withripple"><a href="galleries/index.html">Galerias</a></li>
                <li class="withripple"><a href="stories/acerca-de/">Acerca de</a></li>
                <li class="withripple"><a href="rss.xml">feed RSS</a></li>

                    
                </ul>
<ul class="nav navbar-nav"><!-- DuckDuckGo custom search --></ul>
<form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://map0logo.github.io/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->

                    
                
            </nav><div class="posts-material col-xs-9">
                <div class="col-xs-12 col-md-11 content-material">

    <div class="postindex well post-material ">
        <article class="h-entry post-text"><header><h1 class="p-name entry-title header"><a href="posts/agentes-en-python/" class="u-url">Agentes en Python</a></h1>
            <div class="metadata">
                <span class="byline author vcard">
                        <img class="img-circle" src="images/avatar.jpg" alt="icon">
                    Francisco Palm
                </span>
                <span class="dateline"><a href="posts/agentes-en-python/" rel="bookmark">
                    <i class="mdi-device-access-time"></i><time class="published dt-published" datetime="2016-09-17T23:26:50-04:00" title="2016-09-17 23:26">2016-09-17 23:26</time></a></span>
                    <span class="commentline">            <a href="posts/agentes-en-python/#disqus_thread" data-disqus-identifier="cache/posts/agentes-en-python.html">Comments</a>

</span>
            </div>
            <hr></header><div class="e-content entry-content">
        <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Agentes-en-Python">Agentes en Python<a class="anchor-link" href="posts/agentes-en-python/#Agentes-en-Python">¶</a>
</h2>
<p>El recién creado grupo de Telegram <a href="https://telegram.me/PyDataVE">https://telegram.me/PyDataVE</a> se creó a partir del interés en el tema de inteligencia artificial.  Desde el punto de vista del libro mas utilizado en el planeta para la enseñanza de Inteligencia Artificial "Artificial Intelligence: A Modern Approach" (AIMA) de Russell y Norvig <a href="http://aima.cs.berkeley.edu/">http://aima.cs.berkeley.edu/</a> quizás el concepto más básico es el de <em>agente</em>.</p>
<p>En este libro se definen los agentes como:</p>
<blockquote>
<p>Un agente es cualquier cosa capaz de percibir su <strong>entorno</strong> a través de <strong>sensores</strong> (que reciben perceptos) y realizar acciones sobre este entorno mediante <strong>actuadores</strong>.
El comportamiento del agente viene dado por la <strong>función del agente</strong> que proyecta una secuencia de <strong>perceptos</strong> en una <strong>acción</strong>.</p>
</blockquote>
<p>Precisamente esta función del agente $f : P^\ast \rightarrow A$ es la representación de la inteligencia, lo que puede permitir al agente comportarse de un modo <em>racional</em> (o no). Es decir, busca alcanzar el mejor resultado de acuerdo a una <strong>medida de rendimiento</strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="aima-python">aima-python<a class="anchor-link" href="posts/agentes-en-python/#aima-python">¶</a>
</h3>
<p>En el repositorio "oficial" de python del libro AIMA <a href="https://github.com/aimacode/aima-python/blob/master/agents.py">https://github.com/aimacode/aima-python/blob/master/agents.py</a> codifican del siguiente modo a los agentes. Dado que los agentes son un tipo de cosas con sensores y actuadores, empiezan por definir <em>cosa</em>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Thing</span><span class="p">():</span>
    <span class="sd">"""This represents any physical object that can appear in an Environment.</span>
<span class="sd">    You subclass Thing to get the things you want.  Each thing can have a</span>
<span class="sd">    .__name__  slot (used for output only)."""</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'&lt;</span><span class="si">{}</span><span class="s1">&gt;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'__name__'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">is_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">"Things that are 'alive' should return true."</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'alive'</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">alive</span>

    <span class="k">def</span> <span class="nf">show_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">"Display the agent's internal state.  Subclasses should override."</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"I don't know how to show_state."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="c1"># Do we need this?</span>
        <span class="s2">"Display an image of this Thing on the canvas."</span>
        <span class="k">pass</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>La clase <code>Thing</code> es la definición general (clase abstracta) de una cosa a la que podríamos consultar si está viva o no usando <code>is_alive()</code>, puede tener un estado que mostraría mediante <code>show_state()</code>, y que para fines didácticos podría representarse gráficamente mediante <code>display()</code>.</p>
<p>Por su parte, definen al agente de la siguiente manera:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Agent</span><span class="p">(</span><span class="n">Thing</span><span class="p">):</span>

    <span class="sd">"""An Agent is a subclass of Thing with one required slot,</span>
<span class="sd">    .program, which should hold a function that takes one argument, the</span>
<span class="sd">    percept, and returns an action. (What counts as a percept or action</span>
<span class="sd">    will depend on the specific environment in which the agent exists.)</span>
<span class="sd">    Note that 'program' is a slot, not a method.  If it were a method,</span>
<span class="sd">    then the program could 'cheat' and look at aspects of the agent.</span>
<span class="sd">    It's not supposed to do that: the program can only look at the</span>
<span class="sd">    percepts.  An agent program that needs a model of the world (and of</span>
<span class="sd">    the agent itself) will have to build and maintain its own model.</span>
<span class="sd">    There is an optional slot, .performance, which is a number giving</span>
<span class="sd">    the performance measure of the agent in its environment."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alive</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bump</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">holding</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">performance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">program</span><span class="p">(</span><span class="n">percept</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Percept=</span><span class="si">{}</span><span class="s1">; action? '</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percept</span><span class="p">)))</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">Callable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">program</span> <span class="o">=</span> <span class="n">program</span>

    <span class="k">def</span> <span class="nf">can_grab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thing</span><span class="p">):</span>
        <span class="sd">"""Returns True if this agent can grab this thing.</span>
<span class="sd">        Override for appropriate subclasses of Agent and Thing."""</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Así, mediante herencia se establece que un agente es un tipo de cosa que está viva <code>self.alive = True</code> y que no es un simple obstáculo <code>self.bump = False</code>. El agente puede recolectar cosas mediante <code>can_grab(thing)</code> y almacena en <code>self.holding = []</code>, y tiene una medida de rendimiento interna <code>self. performance</code>.</p>
<p>Finalmente, contiene la colección descrita en <code>program</code> que recibe perceptos y devuelve acciones.</p>
<p>Ambas son definiciones abstractas que se utilizan en los ejemplos que están en el mismo repositorios y que se revisarán con detenimiento en otros artículos.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Modelo-de-Schelling">Modelo de Schelling<a class="anchor-link" href="posts/agentes-en-python/#Modelo-de-Schelling">¶</a>
</h3>
<p>Un ejemplo clásico de simulación de agentes es el Modelo Dinámico de Segregación de Thomas Schelling de 1971 "Dynamic Models of Segregation" [Journal of Mathematical Sociology. 1 (2): 143–186. doi:10.1080/0022250x.1971.9989794], en el que se representa una simulación de segregación racial en la que a partir de una definición simple del comportamiento individual de los agentes es posible observar como emergen comportamientos colectivos. Estas ideas luego son generalizadas en su libro seminal de 1978 "Micromotives and Macrobehavior" <a href="http://books.wwnorton.com/books/978-0-393-32946-9/">http://books.wwnorton.com/books/978-0-393-32946-9/</a>. Vale la pena señalar que Thomas Schelling fue ganador del Premio Nobel de Economía en el 2005.</p>
<p>El modelo de Schelling del mundo es una malla; cada celda representa una casa. Las casas están ocupadas por dos clases de personas, con la etiqueta de color rojo y azul, en aproximadamente el mismo número. Una pequeña proporción de las casas están vacías. En cualquier momento, un agente puede ser feliz o infeliz, dependiendo de los otros agentes en el vecindario. La vecindad de cada casa es el conjunto de ocho células adyacentes. En una versión del modelo, los agentes son felices si tienen al menos dos vecinos de su mismo tipo, e infeliz si tienen uno o cero.</p>
<p>La simulación pasa por la elección de un agente al azar y la comprobación para ver si es feliz. Si es así, no pasa nada; si no, el agente elige una de las celdas desocupadas al azar y se muda.</p>
<p>Se mostrarán a continuación dos definiciones de agentes utilizadas para simular el modelo de Schelling como ejemplos concretos y alternativos de implantación de agentes.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Mesa">Mesa<a class="anchor-link" href="posts/agentes-en-python/#Mesa">¶</a>
</h4>
<p>Mesa <a href="https://github.com/projectmesa/mesa">https://github.com/projectmesa/mesa</a> es un framework en Python para el desarrollo de simulaciones basadas en agentes que espera convertirse en una alternativa de las bibliotecas mas utilizadas en simulación multiagente que están desarrolladas en Java. La representación abstracta de un agente en Mesa es muy simple:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Agent</span><span class="p">:</span>
    <span class="sd">""" Base class for a model agent. """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unique_id</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="sd">""" Create a new agent. """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span> <span class="o">=</span> <span class="n">unique_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">""" A single step of the agent. """</span>
        <span class="k">pass</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>En este caso se representa como una entidad con una identificación única <code>unique_id</code>, que está asociado a un modelo <code>model</code>, y realiza pasos <code>steps()</code>.</p>
<p>A partir de está definición se define un agente para el modelo de Schelling <a href="https://github.com/projectmesa/mesa/blob/master/examples/Schelling/model.py">https://github.com/projectmesa/mesa/blob/master/examples/Schelling/model.py</a>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">SchellingAgent</span><span class="p">(</span><span class="n">Agent</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Schelling segregation agent</span>
<span class="sd">    '''</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">agent_type</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">         Create a new Schelling agent.</span>
<span class="sd">         Args:</span>
<span class="sd">            unique_id: Unique identifier for the agent.</span>
<span class="sd">            x, y: Agent initial location.</span>
<span class="sd">            agent_type: Indicator for the agent's type (minority=1, majority=0)</span>
<span class="sd">        '''</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">agent_type</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">similar</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">neighbor_iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">neighbor</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
                <span class="n">similar</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># If unhappy, move:</span>
        <span class="k">if</span> <span class="n">similar</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">homophily</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">move_to_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">happy</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nótese que en este caso el comportamiento <em>reactivo</em> del agente se especifica en el método <code>step()</code>, en cada paso de la simulación el agente verifica el número de vecinos <code>model.grid.neighbor_iter(self.pos)</code> de su mismo tipo y no satisface la tolerancia del modelo <code>model.homophily</code> el agente se mueve a una celda vacía.</p>
<p>El modelo hace referencia al <em>entorno</em> mencionado arriba, y la cantidad de vecinos y su tipo son perceptos que adquiere mediante un proceso sensorial implícito, esta información la convierte en la decisión de realizar la acción de mudarse o quedarse en el mismo lugar.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Think-Complexity">Think Complexity<a class="anchor-link" href="posts/agentes-en-python/#Think-Complexity">¶</a>
</h4>
<p>Finalmente revisemos la implementación de un agente que hace Allen Downey para este mismo modelo en la 2da Edición de su libro "Think Complexity" <a href="https://github.com/AllenDowney/ThinkComplexity2/blob/master/code/chap09.ipynb">https://github.com/AllenDowney/ThinkComplexity2/blob/master/code/chap09.ipynb</a>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Agent</span><span class="p">:</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="sd">"""Creates a new agent at the given location.</span>
<span class="sd">        </span>
<span class="sd">        loc: tuple coordinates</span>
<span class="sd">        params: dictionary of parameters</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># extract the parameters</span>
        <span class="n">max_vision</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'max_vision'</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">max_metabolism</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'max_metabolism'</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">min_lifespan</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'min_lifespan'</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
        <span class="n">max_lifespan</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'max_lifespan'</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
        <span class="n">min_sugar</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'min_sugar'</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">max_sugar</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'max_sugar'</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        
        <span class="c1"># choose attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vision</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_integers</span><span class="p">(</span><span class="n">max_vision</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metabolism</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_metabolism</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lifespan</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">min_lifespan</span><span class="p">,</span> <span class="n">max_lifespan</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sugar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">min_sugar</span><span class="p">,</span> <span class="n">max_sugar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
        <span class="sd">"""Look around, move, and harvest.</span>
<span class="sd">        </span>
<span class="sd">        env: Sugarscape</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">look_around</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vision</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sugar</span> <span class="o">+=</span> <span class="n">env</span><span class="o">.</span><span class="n">harvest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">metabolism</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">is_starving</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Checks if sugar has gone negative."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sugar</span> <span class="o">&lt;</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">is_old</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Checks if lifespan is exceeded."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">lifespan</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Fíjense que en este caso se añaden detalles adicionales del estado del agente: edad <code>age</code> y localización <code>loc</code> (coordenadas de su posición en la malla). Aparte de su metabolismo <code>metabolism</code> (esto es, la velocidad con la que consume energía), su alcance visual <code>vision</code>, la duración de su vida <code>lifespan</code>, y la cantidad de azúcar <code>sugar</code> que contiene, como una medida genérica de energía. Los agentes que superan su límite de vida y se quedan sin azúzar son eliminados.</p>
<p><code>vision</code> es un parámetro que determina el proceso sensorial con el que percibe el entorno a partir de su posición actual <code>env.look_around(self.loc, self.vision)</code>, y en esta función es donde se toma la decisión hacia donde moverse En esta versión del modelo se mueve hacia la celda vacía dentro de su campo visual con la mayor cantidad de azúcar.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Estos dos últimos ejemplos de agentes sirven como demostraciones de casos concretos, en este caso agentes reactivos con un comportamiento muy simple. Ya sea la felicidad o el nivel de azúcar son medidas de rendimiento que determinan el comportamiento de los agentes.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

</div>
</div>
</div>

</div>
    </div>
  </div>

        </div>
        </article><article class="h-entry post-text"><header><h1 class="p-name entry-title header"><a href="posts/desplegar-nikola-en-github/" class="u-url">Desplegar nikola en github</a></h1>
            <div class="metadata">
                <span class="byline author vcard">
                        <img class="img-circle" src="images/avatar.jpg" alt="icon">
                    Francisco Palm
                </span>
                <span class="dateline"><a href="posts/desplegar-nikola-en-github/" rel="bookmark">
                    <i class="mdi-device-access-time"></i><time class="published dt-published" datetime="2014-09-01T22:39:11-05:30" title="2014-09-01 22:39">2014-09-01 22:39</time></a></span>
                    <span class="commentline">            <a href="posts/desplegar-nikola-en-github/#disqus_thread" data-disqus-identifier="cache/posts/desplegar-nikola-en-github.html">Comments</a>

</span>
            </div>
            <hr></header><div class="e-content entry-content">
        <div>
<p>Importante seguir las instrucciones con atención, no vale la pena intentar ser
originales :-D.</p>
<p>Para crear un despliegue de nikola en github como página principal seguir los
siguientes pasos:</p>
<ol class="arabic simple">
<li>Crear en tu cuenta de github un repositorio con nombre <tt class="docutils literal"><span class="pre">[usuario].github.io</span></tt>
</li>
<li>Clonar ese repositorio y crear un entorno virtual (python 3.4) para
esa carpeta.</li>
</ol>
<pre class="code console"><a name="rest_code_0537e841a9414629bf31914b14097c4c-1"></a><span class="gp">$</span> git clone https://github.com/<span class="o">[</span>usuario<span class="o">]</span>/<span class="o">[</span>usuario<span class="o">]</span>.github.io.git
<a name="rest_code_0537e841a9414629bf31914b14097c4c-2"></a><span class="gp">$</span> mkvirtualenv -p /usr/bin/python3 <span class="o">[</span>usuario<span class="o">]</span>.github.io <span class="c1"># Necesitas tener virtualenvwrapper</span>
<a name="rest_code_0537e841a9414629bf31914b14097c4c-3"></a><span class="gp">$</span> <span class="nb">cd</span> <span class="o">[</span>usuario<span class="o">]</span>.github.io.git
</pre>
<ol class="arabic simple" start="3">
<li>Crear una rama "sources" para la nueva instancia de nikola</li>
</ol>
<pre class="code console"><a name="rest_code_3fdf6f940d5e425a8e06a58bc8d4a025-1"></a><span class="gp">$</span> touch README.md <span class="c1"># necesitas al menos un commit</span>
<a name="rest_code_3fdf6f940d5e425a8e06a58bc8d4a025-2"></a><span class="gp">$</span> git add README.md
<a name="rest_code_3fdf6f940d5e425a8e06a58bc8d4a025-3"></a><span class="gp">$</span> git commit REAME.md -m <span class="s2">"Initial commit"</span>
<a name="rest_code_3fdf6f940d5e425a8e06a58bc8d4a025-4"></a><span class="gp">$</span> git branch sources <span class="c1"># la rama con los fuentes de nikola</span>
<a name="rest_code_3fdf6f940d5e425a8e06a58bc8d4a025-5"></a><span class="gp">$</span> git checkout sources <span class="c1"># ahora trabajamos sobre los fuentes</span>
</pre>
<ol class="arabic simple" start="4">
<li>En el nuevo entorno virtual y en la rama sources instalar nikola</li>
</ol>
<pre class="code console"><a name="rest_code_65d97568d0254c3485344c580025f174-1"></a><span class="gp">$</span> pip install nikola
<a name="rest_code_65d97568d0254c3485344c580025f174-2"></a><span class="gp">$</span> nikola init ./
</pre>
<ol class="arabic simple" start="5">
<li>En conf.py que debe ahora estar en la raíz del repositorio, descomentar y
editar las variables</li>
</ol>
<pre class="code python"><a name="rest_code_e5ea4d2d065a4cab8db44291a652076b-1"></a><span class="n">GITHUB_SOURCE_BRANCH</span> <span class="o">=</span> <span class="s1">'sources'</span>
<a name="rest_code_e5ea4d2d065a4cab8db44291a652076b-2"></a><span class="n">GITHUB_DEPLOY_BRANCH</span> <span class="o">=</span> <span class="s1">'master'</span>
</pre>
<ol class="arabic" start="6">
<li>
<p class="first">Finalmente añadir algo de contenido usando <tt class="docutils literal">nikola new_post</tt> o
<tt class="docutils literal">nikola new_page</tt>, ¡ojo!, siempre en la rama <tt class="docutils literal">sources</tt></p>
<p>Editar el post</p>
</li>
</ol>
<pre class="code console"><a name="rest_code_49a489abd18942deb689e8e3425b1eb7-1"></a><span class="gp">$</span> git add posts/<span class="o">[</span>nuevo_post<span class="o">]</span>.rst
<a name="rest_code_49a489abd18942deb689e8e3425b1eb7-2"></a><span class="gp">$</span> git commit -a <span class="s2">"Add [nuevo_post]"</span>
<a name="rest_code_49a489abd18942deb689e8e3425b1eb7-3"></a><span class="gp">$</span> nikola github_deploy
</pre>
<p>Puede ser conveniente crear el correspondiente .gitignore en la raíz del
repositorio, con más o menos el siguiente contenido</p>
<pre class="literal-block">
.idea/
__pycache__/
output/
cache/
.doit.db
</pre>
<p><tt class="docutils literal">.idea</tt> para proyectos de pycharm, el resto son carpetas y archivos generados
por nikola.</p>
</div>
        </div>
        </article>
</div>

               <script>var disqus_shortname="map0logo";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script>
</div>
            </div>
        </div>
        <button class="btn btn-fab btn-raised btn-material-green btn-footer" data-toggle="modal" data-target="#footer-dialog">
            <i class="mdi-communication-message"></i>
        </button>
        <div id="footer-dialog" class="modal fade" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Francisco Palm</h4>
                <div>
                    
<img class="img-circle" style="float:left;margin:10px 20px 10px 0px;max-height:200px;" src="images/avatar.jpg"><p>Francisco Palm (팜 시스코) poetic geomatics, mathematical geomancy, hacktivist, Python &amp; R, Pop &amp; Rock Indie, Geek &amp; Otaku, Zen &amp; K, Massive Empowerment</p>

                </div>
                <hr>
</div>
              <div class="modal-body">
                    Contents © 2016         <a href="mailto:francisco.palm@gmail.com">Francisco Palm</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
<img alt="Licencia Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>Esta obra está bajo una <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
Licencia Creative Commons Atribución-CompartirIgual 4.0 Internacional</a>.

                    
              </div>
              <div class="modal-footer">
                <button class="btn btn-primary" data-dismiss="modal">Ok</button>
              </div>
            </div>
          </div>
        </div>
        <div class="source-button">
        </div>
        <div class="kc_fab_wrapper"></div>
</div>

            <script src="assets/js/all-nocdn.js"></script><script src="assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><script>
                var links = [
                        {
                            "bgcolor": "#F44336",
                            "icon": "<i class='fa fa-share-square-o'></i>",
                        },
                        {
                            "url": "https://twitter.com/mapologo",
                            "color": "#fffff",
                            "bgcolor": "#55ACEE",
                            "icon": "<i class='fa fa-twitter'></i>",
                            "target": "_blank",
                        },
                        {
                            "url": "https://github.com/map0logo",
                            "color": "#fffff",
                            "bgcolor": "#666666",
                            "icon": "<i class='fa fa-github-square'></i>",
                            "target": "_blank",
                        },
                        {
                            "url": "https://www.facebook.com/mapologo",
                            "color": "#fffff",
                            "bgcolor": "#3B5998",
                            "icon": "<i class='fa fa-facebook'></i>",
                            "target": "_blank",
                        },
                ];

            $(document).ready(function() {
                // This command is used to initialize some elements and make them work properly
                $.material.init();
                    $('.kc_fab_wrapper').kc_fab(links);
            });

            $(window).on("resize", function() {
                $("html, body").height($(window).height());
                $(".main, .menu").height($(window).height() - $(".header-panel").outerHeight() - 76 ); // footer margin: $("footer.footer").outerHeight()
                $(".posts-material").height($(window).height());
            }).trigger("resize");
        </script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
